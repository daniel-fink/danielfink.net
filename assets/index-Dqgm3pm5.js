var Nt=Object.defineProperty;var Ht=(o,e,t)=>e in o?Nt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var f=(o,e,t)=>Ht(o,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const ke="About",ye=[{type:"image",popout:!1,value:"df_profile-sq.png"},{type:"body",value:"Daniel Fink is an expert in applying the state-of-the-art to architecture, planning, and property development. With over fifteen years experience in both practice and academia, his focus is in building digital and physical workflows, platforms, and tools that integrate computational design, real estate finance and geospatial science, with project and product delivery."},{type:"body",value:"Daniel is currently an Independent Consultant to commercial, academic, and government clients, and is a Senior Associate at AR-MA, an advanced design computing and fabrication consultancy. He was previously a Lead Researcher at MIT’s Real Estate Innovation Lab, and was an Urban Design Project Lead at Grimshaw Architects. He has directed numerous design, software, & research teams, published academic papers in leading journals, had work featured at multiple exhibitions, and been an invited lecturer at major universities around the world. Daniel holds a Master of Science in Architecture from MIT, and a Master of Architecture and Bachelor in Design from the University of Sydney."},{type:"body",value:"Independent Consultant<br>Senior Associate, [AR-MA](https://ar-ma.net)<br>Advisor, [Black Oak Group](https://blackoakgroup.co)<br>Lead Researcher (fmr.), [MIT Real Estate Innovation Lab](https://realestateinnovationlab.mit.edu)"},{type:"body",value:"SMArchS (Massachusetts Institute of Technology)<br>MArch (Hons.) (University of Sydney)<br>BDesArch (University of Sydney)"},{type:"body",value:"Email: daniel@danielfink.net<br>Github: [github.com/daniel-fink](https://www.github.com/daniel-fink)"},{type:"body",value:"Download my CV here: [Curriculum Vitae](/dfink-cv.pdf)"}],Gt={title:ke,blocks:ye},Ft=Object.freeze(Object.defineProperty({__proto__:null,blocks:ye,default:Gt,title:ke},Symbol.toStringTag,{value:"Module"})),we="Approach",ve=0,xe=[{type:"subtitle",value:"Linking Design to Finance"},{type:"body",value:"New digital tools are making it easier to create detailed, accurate models of property development. By combining financial analysis with design and delivery planning, teams can now get a clear, shared view of how a project is likely to perform and where the opportunities lie."},{type:"subtitle",value:"Tailored Solutions from Common Foundations"},{type:"body",value:"Every project is different, but starting from scratch each time is risky. By turning expert knowledge — like rules of thumb, benchmarks, and best practices — into software and data tools, we can build flexible foundations that others can use and adapt. On top of that, we can create custom tools for each project or client. This approach lets teams use the best available methods while still keeping their unique expertise."}],Ut={title:we,index:ve,blocks:xe},Zt=Object.freeze(Object.defineProperty({__proto__:null,blocks:xe,default:Ut,index:ve,title:we},Symbol.toStringTag,{value:"Module"})),_e="Digital Tools & Workflows",Se=1,Te=[{type:"subtitle",value:"Asset-level"},{type:"body",value:`- Assisted & Automated Scenario-generation for Massing, Use-mix, Blocking & Stacking
- Integrated Design, Engineering & Financial Analysis per Scenario, including:
  - Space- & Part-level Micro-Proformas
  - Views & Daylighting Analysis and Revenue Premia
  - Solar Analysis and Operations Costs
- Flexibility Strategies (Use, Phasing Scenarios) and Upside Risk Opportunities
 #### Example Projects:
 - [Rangekeeper](#Rangekeeper): An open-source code library for financial modelling of real estate assets & development.
 - [Lendlease Podium for Development (Podium.io)](https://podium.io): Integrated financial modelling workspace for real estate development software platform
- [The value of daylight in office spaces](https://www.sciencedirect.com/science/article/abs/pii/S0360132319307152): Econometric analysis identifying rent premia from good daylight, published in Building and Environment`},{type:"subtitle",value:"Neighborhood-level"},{type:"body",value:`- Urban Design & Masterplanning services
- Automated Financial Proforma Generation per-Parcel
- Regulatory Constraint Modelling per-Parcel
- Automated Highest & Best Use Analysis per-Parcel
- Solar Overshadowing & Daylighting Modelling per-Scenario
 #### Example Projects:
 - [Central to Eveleigh Urban Transformation Strategy](https://www.centraltoeveleigh.nsw.gov.au/uts/uts/), Sydney. With Grimshaw Architects (Design Lead) 
 - Maribyrnong Defense Site, Melbourne. With Grimshaw Architects (Design Lead)
 - [City of Boston Housing Development Interactive Educational Toolkit](https://placeful.github.io/housingilab/): A webapp for user-directed learning about property development outcomes and urban planning rules
 - [MIT Media Lab CityScope Financial Modelling Module](https://realestateinnovationlab.mit.edu/research_article/automated-financial-modeling-for-urban-design/): Precinct-level economic outcomes analysis for immersive workshops`},{type:"subtitle",value:"Region-level"},{type:"body",value:`- Property Market Pricing Dynamics Simulation
- Automated & Assisted Site Prospecting
 #### Example Projects:
 - Greater Sydney Missing-Middle Site-finder (Confidential Client)
 - Black Oak Ventures Prospector: An integrated CRM and geospatial analysis application for townhome development in California`}],Wt={title:_e,index:Se,blocks:Te},Vt=Object.freeze(Object.defineProperty({__proto__:null,blocks:Te,default:Wt,index:Se,title:_e},Symbol.toStringTag,{value:"Module"})),Re="Complex Urbanities",$e=1,Ce="2018-09-01",Ae="The Byera Hadley Travelling Scholarship is Australia’s most prestigious architectural bequest. It provides funding of up to $30,000 for students of architecture to undertake travel-based research that contributes to the advancement of the discipline. 'Complex Urbanities: Digital Techniques in Urban Design' is a result of my scholarship, exploring the evolving role of computational design in urban design &  development.",ze=[{type:"body",value:"The report investigates the transformative potential of computational approaches in urban design through four in-depth interviews with leaders in architecture, computer science, and practice. The conversations explore how digital methods can reshape urbanism, from grassroots development models to top-down planning systems, with particular emphasis on democratization, complexity, and cross-disciplinarity."},{type:"image",value:"bh01.png"},{type:"body",value:`- Dan Hill (urbanist & technologist) argues that designers must move beyond buildings to engage with socio-technical systems and platforms, using technology to create distributed, civic-oriented infrastructures and redefine value in urbanism.
- José Duarte & José Beirão (academics in architecture) see computational grammars as tools to balance complexity and customization in urban design, advocating for systems that embed social values and align with planning practice.
- Peter Wonka (academic in computer science) highlights the technical difficulties of urban computation and stresses the need for human-guided tools that support exploration over automation, requiring close collaboration between designers and engineers.
- Christian Derix (architect & urban designer) champions computation as a means to support civic outcomes and resist poor planning, cautioning against techno-solutionism and calling for more values-driven, multi-scalar approaches.`},{type:"body",value:"The interviews reveal shared views on how digital technologies are reshaping urbanism; not only in form, but in governance, experience, and decision-making. There is a clear shift from designing objects to designing systems, with computation enabling both generation and evaluation. Designers are increasingly seen as architects of platforms and processes, not just spaces. While digital tools can democratize design, they can also centralize control, making the intent and structure of these tools critical. Computation is thus positioned not just as a technical aid, but as a mediator of values and social outcomes."},{type:"body",value:"Download the report from the NSW Architects' Registration Board resource library: [Complex Urbanities: Digital Techniques in Urban Design](https://www.architects.nsw.gov.au/resource-library/research-reports/report/15?search=&report_tags=&locations=)"}],Qt={title:Re,index:$e,date:Ce,description:Ae,blocks:ze},Jt=Object.freeze(Object.defineProperty({__proto__:null,blocks:ze,date:Ce,default:Qt,description:Ae,index:$e,title:Re},Symbol.toStringTag,{value:"Module"})),Pe="Floor-shape Constraint Solving",Ee=5,Ie=null,Le="A toolset that reshapes building floorplates while maintaining overall area and design intent. Developed in response to difficulties in complying with both planning constraints and design intent during early-stage urban form development.",De=[{type:"body",value:"Automated design tools often generate geometry through procedural algorithms, but adjusting these algorithms' input parameters to meet global performance constraints (such as total floor area) can be challenging. When such constraints aren’t satisfied, it’s rarely obvious which parameters need modification. As a result, designers must rely on trial-and-error iterations, which can be time-consuming and often misaligned with the original design intent. Reverse-engineering procedural steps to identify how to make those adjustments can be ambiguous and complex.<br><br>To address this, I developed a computational toolset for reshaping building floorplates while preserving global properties, like total area. It allows designers to directly manipulate vertex positions and edge lengths, while underlying geometric rules maintain area consistency. This approach blends precise constraint solving with intuitive user control, enabling flexible yet compliant design exploration aligned with project goals."},{type:"video",value:"kalamata01.mp4"},{type:"body",value:"Codenamed 'Kalamata', the toolset was implemented in Grasshopper, and consists of a series of customised components that specify goals/constraints that extend the [Kangaroo Constraint Solver](http://kangaroo3d.com/). As opposed to conventional decomposition, symbolic, or constraint propagation techniques, Kangaroo makes use of an axial force-based equilibrium solver, which means it is very easy to define custom goals, however it comes at the expense of accuracy and robustness. Future work can utilize more robust solutions such as the [SolveSpace library](https://solvespace.com/library.pl)."},{type:"image",value:"kalamata02.png"},{type:"body",value:"Fundamentally, the components enable specifying an area goal for a shape, while retaining the directionality of the shape's edges. This means that the user can specify a target area, and then drag the vertices of the shape to adjust its form, while the area and overall shape topology remains constant."},{type:"image",value:"kalamata03.png"},{type:"body",value:"In addition, the edge lengths of a shape can be clamped between minimum and maximum lengths, multiple shapes can be inhibited from colliding, and internal 'voids' can be inhibited from overlapped external edges. This facilitates the kinds of typical geometric moves in massing design and floorplate planning."},{type:"image",value:"kalamata04.png"}],Xt={title:Pe,index:Ee,date:Ie,description:Le,blocks:De},Kt=Object.freeze(Object.defineProperty({__proto__:null,blocks:De,date:Ie,default:Xt,description:Le,index:Ee,title:Pe},Symbol.toStringTag,{value:"Module"})),Me="Computational Network Design",Be=3,je="2016-07-11",qe="Under the leadership of UCL Smart Geometry Lab Prof. Niloy Mitra and lead author Chi-Han Peng, this paper presents a computational method for generating network layouts—such as streets or floorplans—based solely on high-level functional specifications like density, travel time, and traffic type. Using an integer programming approach, the method guarantees valid networks that meet all constraints and perform well on defined objectives.",Oe=[{type:"body",value:"Designing networks (especially in multi-disciplinary domains like street traffic or office floorplans) is typically a manual and iterative process involving planners and engineers. Accurately predicting network performance through visual inspection alone is inherently challenging, and existing tools predominantly rely on geometric precedents or are limited to performance analysis rather than generative synthesis."},{type:"body",value:`#### Computational Network Design from Functional Specifications
 Published in: ACM Transactions on Graphics, 11 July 2016`},{type:"image",value:"network01.png"},{type:"body",value:`We propose user-definition of functional specifications, or descriptions intended network behaviour. These include: 
- Density: how tightly connected the network should be.
- Travel time vs. length: balance between total edge length and access.
- Traffic type: boundary-to-boundary, interior-to-boundary, or interior-to-interior.
- Sink locations: destinations placements (e.g., shops, exits).
- Local features: preference for or avoidance of T-junctions, dead-ends, etc.
- User specifications: forced inclusions (e.g., direct connections), or exclusions (e.g., obstacles).`},{type:"body",value:"The functional requirements are encoded into an integer programming formulation where variables represent the presence or absence of edges between network nodes; constraints enforce network validity, and the objective function encodes performance goals (e.g., minimize travel time, total length, maximize coverage)."},{type:"image",value:"network02.png"},{type:"body",value:"The approach and methodology was tested in a vehicular traffic scenario, using the [SUMO](https://eclipse.dev/sumo/) simulator. We benchmarked our synthesized networks against SUMO simulations across six scenarios, finding consistent results with only a near-constant underestimation of travel times. This confirms that functional specifications alone can effectively achieve design goals, demonstrating the robustness and practical utility of the approach."},{type:"body",value:"Access the paper here: [Computational network design from functional specifications](https://doi.org/10.1145/2897824.2925935)"}],Yt={title:Me,index:Be,date:je,description:qe,blocks:Oe},en=Object.freeze(Object.defineProperty({__proto__:null,blocks:Oe,date:je,default:Yt,description:qe,index:Be,title:Me},Symbol.toStringTag,{value:"Module"})),Ne="Pricing Daylight and Views",He=2,Ge="2021-11-01",Fe="Alongside MIT collaborators Dr. Irmak Turan, Dr. Andrea Chegut, and Dr. Christoph Reinhardt, statistically significant evidence was identified for the economic value of good daylighting and views for office spaces. In addition, we developed new metrics to measure the view potential for office spaces and demonstrated their productivity.",Ue=[{type:"body",value:"Access to daylight and views is not just a matter of architectural aesthetics; it directly impacts human well-being, workplace productivity, and economic value. In two companion studies, we combined environmental simulation with econometric modeling to quantify how much tenants in dense urban office markets are willing to pay for these spatial qualities."},{type:"body",value:`#### The value of daylight in office spaces
 Published in Building and Environment, 25 October 2019`},{type:"body",value:"This paper pairs spatial daylight simulation with a hedonic pricing model to empirically quantify how daylight access affects commercial office rents in Manhattan. It finds that office spaces with high daylight performance command 5–6% higher rents than similar spaces with low daylight. This premium is independent of sustainability certifications or building height, underscoring daylight as a financially material design factor. The study shows that only 26% of office floors meet best-practice daylight levels, and argues that daylight should be a key consideration in investment and urban policy."},{type:"image",value:"daylight_views04.png"},{type:"body",value:"Our methodology was two-fold: first, we identified 5,154 floors in commercial office buildings in Manhattan, and created a an individual 3D model for each building those floors were in. We simulated the daylight distribution in each floorspace using climate-based backwards ray-tracing and measured the spatial daylight autonomy (sDA). We then input those results into an hedonic pricing model (multiple regression), that identifies the impact of each space's characteristics on its rent price. By controlling for exogenous building characteristics, lease contract terms, location fixed effects, and time fixed effects, we were able to isolate the impact of daylight on rent prices."},{type:"image",value:"daylight_views10.png"},{type:"body",value:"Access the paper here: [The value of daylight in office spaces](https://doi.org/10.1016/j.buildenv.2019.106503)<br><br>"},{type:"body",value:`#### Development of view potential metrics and the financial impact of views on office rents
 Published in Landscape and Urban Planning, 9 July 2021`},{type:"image",value:"daylight_views01.png"},{type:"body",value:"This paper introduces two quantitative metrics: Minimum View Potential (MVP); and Spatial View Access (sVA), to evaluate access to outdoor views in open-plan office spaces using 3D geometric models. Applied across 5,154 Manhattan offices, the analysis found that higher view access correlates with a 6% rent premium, independent of daylight quality. The findings establish not only a method for measuring visual connectivity in architectural spaces but also provide evidence for the economic value of views, informing design, development, and planning decisions."},{type:"image",value:"daylight_views12.png"},{type:"body",value:"Similarly to our previous paper, we simulate the potential view access to an office floor by backwards ray-tracing, and inputting those results into an hedonic pricing model, while controlling for all factors specified in our paper on daylighting. Because daylight and views are closely related, we design a view metric (sVA3) to exclude sky views, and then interact that measure with the daylight metric (sDA) to isolate the conditional marginal effect of having both high daylight and high view access. We find that spaces with high access to views have a 6% premium over spaces with low access, the same as those with *both* good views and daylight."},{type:"body",value:"Access the paper here: [Development of view potential metrics and the financial impact of views on office rents](https://doi.org/10.1016/j.landurbplan.2021.104193)"}],tn={title:Ne,index:He,date:Ge,description:Fe,blocks:Ue},nn=Object.freeze(Object.defineProperty({__proto__:null,blocks:Ue,date:Ge,default:tn,description:Fe,index:He,title:Ne},Symbol.toStringTag,{value:"Module"})),Ze="Rangekeeper",We=4,Ve=null,Qe="Rangekeeper is an open-source Python library designed for financial modeling in real estate asset and development planning, initiated while I was at MIT's Real Estate Innovation Lab and continually developed since.",Je=[{type:"body",value:"Rangekeeper enables real estate valuation at all stages and resolutions of description — from early-stage ‘back-of-the-envelope’ models to detailed commercial assessments, and can be completely synchronised with 3D design, engineering, and logistics modelling.<br><br>It decomposes elements of the Discounted Cash Flow (DCF) Proforma modelling approach into recomposable code functions that can be wired together to form a full model."},{type:"image",value:"rk01.png"},{type:"body",value:`Development of the library follows the rigorous methodology established by MIT Professors David Geltner and Richard de Neufville, in their book [Flexibility and Real Estate Valuation under Uncertainty: A Practical Guide for Developers](https://www.wiley.com/go/geltner-deneufville/flexibility-and-real-estate-valuation), and expands it into a more robust computational framework.<br><br>Critically, Rangekeeper provides two key features:
1. Market dynamics and flexibility policies that simulate real-world decision-making for development projects. By simulating real options (like go-no-go decisions) in response to real estate market idiosyncrasies like cyclicality, mean-reversion, and volatility, Rangekeeper can identify *optionality alpha* and nonlinear payoffs for a project.
2. An entity-relationship graph schema of a real estate asset that is ultra-configurable for modelling any project type or topology. Rangekeeper uses the object model for aggregations (roll-ups) of cash flows in order to evaluate financial performance of the project at any resolution.`},{type:"image",value:"rk02.png"},{type:"body",value:"Because it enables the *programmatic* simulation of the financial performance and flexibility of a real estate asset under uncertainty, Rangekeeper is intended to be tied to other representations of a project, such as 3D CAD, BIM, GIS, and OT (management & operations). This offers a more sophisticated, and realistic, simulation of real estate investment scenarios."},{type:"image",value:"rk03.png"},{type:"image",value:"rk04.png"},{type:"body",value:"The first integrations are with [Speckle](https://speckle.systems) (a platform for connecting 3D design and engineering data) via an API, and [Rhinoceros 3D's Grasshopper](https://www.rhino3d.com/grasshopper) (a visual programming environment), via a set of Grasshopper components that extend Speckle Objects with Rangekeeper entity-relationship graph features."},{type:"body",value:"Rangekeeper is hosted on GitHub here: [https://github.com/daniel-fink/rangekeeper](https://github.com/daniel-fink/rangekeeper), and a walkthrough explaining its use and features can be found here: [https://daniel-fink.github.io/rangekeeper/](https://daniel-fink.github.io/rangekeeper/)"}],sn={title:Ze,index:We,date:Ve,description:Qe,blocks:Je},an=Object.freeze(Object.defineProperty({__proto__:null,blocks:Je,date:Ve,default:sn,description:Qe,index:We,title:Ze},Symbol.toStringTag,{value:"Module"})),Xe="Linking Design to Finance",Ke=0,Ye="2017-05-25",et="'Linking Design to Finance: Enabling a Co-Operative Developer Platform through Automated Design and Valuation' was a SMArchS thesis at MIT, completed in 2017. It explores the intersection of design computation and finance in urban development.",tt=[{type:"body",value:"Urban design is undergoing a transformation. As data becomes ubiquitous, computation more powerful, and finance more abstracted, the instruments of city-making — currently harnessed by well-capitalized and sophisticated actors — are increasingly within reach.<br><br> This thesis asks: *what happens when design, data, and finance are not just digitized, but democratized?*<br><br> Grounded in both innovation diffusion theory and precedents of collective urban production (from co-housing to co-working), the thesis responds to a key structural challenge: while urban design and feasibility analysis are increasingly supported by automation and data, access to land and capital remains prohibitively exclusive. The project hypothesizes that linking generative design tools with real-time financial modelling can lower participation barriers and enable decentralized, community-led development."},{type:"image",value:"thesis01.png"},{type:"body",value:"The technical core involves two linked systems, hypothesised as patents for computer systems:"},{type:"video",value:"nycd316.mp4"},{type:"body",value:"1. *A design rationalization engine*, which adjusts user-drawn building forms to meet spatial and policy constraints, while retaining design intent. It shifts design from drawing to reasoning, enabling rapid exploration of viable options and envisages an easier on-ramp to urban form-making for non-experts."},{type:"video",value:"nycd111-sm.mp4"},{type:"body",value:"2. *An automated financial simulator*, which calculates a design's cash flows and development costs in real time. It closes the gap between design intent and feasibility, reveals hidden financial constraints, and invites broader participation in development decisions."},{type:"body",value:"A design project follows that speculates on the productivity of those patents within a *computational co-developer platform*: a system that lets groups simulate and shape viable urban projects across multiple sites. I tested these tools through a speculative case study in New York City — spanning 36 sites and 1,000 inhabitants — not as a proposal, but as a provocation:<br><br> *What if distributed groups could originate, fund, and deliver their own networks of housing and workspace?*<br><br>The system generates thousands of development permutations; visualized as a ‘performance surface’ spanning design inputs (ie FAR and open-space ratios) and financial outcomes (NPV and IRR). Recognizing that not all individual parcels must be profitable on their own, the project introduces a portfolio-based strategy: enabling cross-subsidization between sites, programs, and typologies to optimize return and space utility across the collective<br><br>The optimization problem — balancing financial yield, spatial provision, and site constraints — is solved via non-linear methods, due to the lumpy, discontinuous nature of the design-performance space. The result is a development logic akin to portfolio theory: maximizing aggregate value while tolerating variance in individual asset performance.<br><br>This work ultimately proposes a new role for platform technologies in shaping urban production. By extending access to both financial insight and design agency, the system reframes the developer as a distributed, participatory entity, aligned around co-ownership, co-design, and co-programming. It suggests a pathway toward public-facing capital stacks and user-driven urban form, operationalizing the ‘right to the city’ through computational tools."},{type:"image",value:"thesis03.png"},{type:"body",value:"Download the thesis from MIT's DSpace repository: [Linking Design to Finance](https://dspace.mit.edu/handle/1721.1/115439)"}],on={title:Xe,index:Ke,date:Ye,description:et,blocks:tt},rn=Object.freeze(Object.defineProperty({__proto__:null,blocks:tt,date:Ye,default:on,description:et,index:Ke,title:Xe},Symbol.toStringTag,{value:"Module"})),nt="/assets/bh01-BIR7m26d.png",it="/assets/daylight_views01-CSpEPJuv.png",st="/assets/daylight_views04-D-Rk4tp6.png",at="/assets/daylight_views10-BLeoJXlm.png",ot="/assets/daylight_views11-Bm_EmXse.png",rt="/assets/daylight_views12-AJl8haO7.png",lt="/assets/df_profile-sq-BDFdfX1x.png",ct="/assets/kalamata01-47A-OCHS.mp4",pt="/assets/kalamata02-BxtWPv5j.png",ut="/assets/kalamata03-BEe23m5J.png",dt="/assets/kalamata04-DQYVkJmu.png",ht="/assets/network01-ChRVJcnb.png",gt="/assets/network02-CAGdCsaz.png",mt="/assets/nycd111-sm-CTpOeMD4.mp4",ft="/assets/nycd316-CaySwMae.mp4",bt="/assets/rk01-B7Lkc2Tp.png",kt="/assets/rk02-3FD8Fh_D.png",yt="/assets/rk03-D8JEhKQw.png",wt="/assets/rk04-DLXCdemP.png",vt="/assets/thesis01-DnVG55o5.jpg",xt="/assets/thesis01-11Ntagj0.png",_t="/assets/thesis02-JYqnWDoJ.png",St="/assets/thesis03-BNgkIhNT.png";function Y(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let C=Y();function Tt(o){C=o}const D={exec:()=>null};function g(o,e=""){let t=typeof o=="string"?o:o.source;const n={replace:(i,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(w.caret,"$1"),t=t.replace(i,a),n},getRegex:()=>new RegExp(t,e)};return n}const w={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:o=>new RegExp(`^( {0,3}${o})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}#`),htmlBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}<(?:[a-z].*>|!--)`,"i")},ln=/^(?:[ \t]*(?:\n|$))+/,cn=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,pn=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,j=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,un=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ee=/(?:[*+-]|\d{1,9}[.)])/,Rt=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,$t=g(Rt).replace(/bull/g,ee).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),dn=g(Rt).replace(/bull/g,ee).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),te=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,hn=/^[^\n]+/,ne=/(?!\s*\])(?:\\.|[^\[\]\\])+/,gn=g(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ne).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),mn=g(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ee).getRegex(),F="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ie=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,fn=g("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ie).replace("tag",F).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ct=g(te).replace("hr",j).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F).getRegex(),bn=g(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ct).getRegex(),se={blockquote:bn,code:cn,def:gn,fences:pn,heading:un,hr:j,html:fn,lheading:$t,list:mn,newline:ln,paragraph:Ct,table:D,text:hn},he=g("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",j).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F).getRegex(),kn={...se,lheading:dn,table:he,paragraph:g(te).replace("hr",j).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",he).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F).getRegex()},yn={...se,html:g(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ie).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:D,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:g(te).replace("hr",j).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$t).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},wn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,At=/^( {2,}|\\)\n(?!\s*$)/,xn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,U=/[\p{P}\p{S}]/u,ae=/[\s\p{P}\p{S}]/u,zt=/[^\s\p{P}\p{S}]/u,_n=g(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ae).getRegex(),Pt=/(?!~)[\p{P}\p{S}]/u,Sn=/(?!~)[\s\p{P}\p{S}]/u,Tn=/(?:[^\s\p{P}\p{S}]|~)/u,Rn=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Et=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$n=g(Et,"u").replace(/punct/g,U).getRegex(),Cn=g(Et,"u").replace(/punct/g,Pt).getRegex(),It="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",An=g(It,"gu").replace(/notPunctSpace/g,zt).replace(/punctSpace/g,ae).replace(/punct/g,U).getRegex(),zn=g(It,"gu").replace(/notPunctSpace/g,Tn).replace(/punctSpace/g,Sn).replace(/punct/g,Pt).getRegex(),Pn=g("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,zt).replace(/punctSpace/g,ae).replace(/punct/g,U).getRegex(),En=g(/\\(punct)/,"gu").replace(/punct/g,U).getRegex(),In=g(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ln=g(ie).replace("(?:-->|$)","-->").getRegex(),Dn=g("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ln).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),O=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Mn=g(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",O).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Lt=g(/^!?\[(label)\]\[(ref)\]/).replace("label",O).replace("ref",ne).getRegex(),Dt=g(/^!?\[(ref)\](?:\[\])?/).replace("ref",ne).getRegex(),Bn=g("reflink|nolink(?!\\()","g").replace("reflink",Lt).replace("nolink",Dt).getRegex(),oe={_backpedal:D,anyPunctuation:En,autolink:In,blockSkip:Rn,br:At,code:vn,del:D,emStrongLDelim:$n,emStrongRDelimAst:An,emStrongRDelimUnd:Pn,escape:wn,link:Mn,nolink:Dt,punctuation:_n,reflink:Lt,reflinkSearch:Bn,tag:Dn,text:xn,url:D},jn={...oe,link:g(/^!?\[(label)\]\((.*?)\)/).replace("label",O).getRegex(),reflink:g(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",O).getRegex()},X={...oe,emStrongRDelimAst:zn,emStrongLDelim:Cn,url:g(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},qn={...X,br:g(At).replace("{2,}","*").getRegex(),text:g(X.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},q={normal:se,gfm:kn,pedantic:yn},E={normal:oe,gfm:X,breaks:qn,pedantic:jn},On={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ge=o=>On[o];function S(o,e){if(e){if(w.escapeTest.test(o))return o.replace(w.escapeReplace,ge)}else if(w.escapeTestNoEncode.test(o))return o.replace(w.escapeReplaceNoEncode,ge);return o}function me(o){try{o=encodeURI(o).replace(w.percentDecode,"%")}catch{return null}return o}function fe(o,e){var s;const t=o.replace(w.findPipe,(a,r,p)=>{let l=!1,c=r;for(;--c>=0&&p[c]==="\\";)l=!l;return l?"|":" |"}),n=t.split(w.splitPipe);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!((s=n.at(-1))!=null&&s.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(w.slashPipe,"|");return n}function I(o,e,t){const n=o.length;if(n===0)return"";let i=0;for(;i<n&&o.charAt(n-i-1)===e;)i++;return o.slice(0,n-i)}function Nn(o,e){if(o.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<o.length;n++)if(o[n]==="\\")n++;else if(o[n]===e[0])t++;else if(o[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function be(o,e,t,n,i){const s=e.href,a=e.title||null,r=o[1].replace(i.other.outputLinkReplace,"$1");n.state.inLink=!0;const p={type:o[0].charAt(0)==="!"?"image":"link",raw:t,href:s,title:a,text:r,tokens:n.inlineTokens(r)};return n.state.inLink=!1,p}function Hn(o,e,t){const n=o.match(t.other.indentCodeCompensation);if(n===null)return e;const i=n[1];return e.split(`
`).map(s=>{const a=s.match(t.other.beginningSpace);if(a===null)return s;const[r]=a;return r.length>=i.length?s.slice(i.length):s}).join(`
`)}class N{constructor(e){f(this,"options");f(this,"rules");f(this,"lexer");this.options=e||C}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:I(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],i=Hn(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const i=I(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:I(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=I(t[0],`
`).split(`
`),i="",s="";const a=[];for(;n.length>0;){let r=!1;const p=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))p.push(n[l]),r=!0;else if(!r)p.push(n[l]);else break;n=n.slice(l);const c=p.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,s=s?`${s}
${u}`:u;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,a,!0),this.lexer.state.top=d,n.length===0)break;const h=a.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){const k=h,b=k.raw+`
`+n.join(`
`),v=this.blockquote(b);a[a.length-1]=v,i=i.substring(0,i.length-k.raw.length)+v.raw,s=s.substring(0,s.length-k.text.length)+v.text;break}else if((h==null?void 0:h.type)==="list"){const k=h,b=k.raw+`
`+n.join(`
`),v=this.list(b);a[a.length-1]=v,i=i.substring(0,i.length-h.raw.length)+v.raw,s=s.substring(0,s.length-k.raw.length)+v.raw,n=b.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const i=n.length>1,s={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const a=this.rules.other.listItemRegex(n);let r=!1;for(;e;){let l=!1,c="",u="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let d=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,V=>" ".repeat(3*V.length)),h=e.split(`
`,1)[0],k=!d.trim(),b=0;if(this.options.pedantic?(b=2,u=d.trimStart()):k?b=t[1].length+1:(b=t[2].search(this.rules.other.nonSpaceChar),b=b>4?1:b,u=d.slice(b),b+=t[1].length),k&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),l=!0),!l){const V=this.rules.other.nextBulletRegex(b),pe=this.rules.other.hrRegex(b),ue=this.rules.other.fencesBeginRegex(b),de=this.rules.other.headingBeginRegex(b),Ot=this.rules.other.htmlBeginRegex(b);for(;e;){const Q=e.split(`
`,1)[0];let P;if(h=Q,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),P=h):P=h.replace(this.rules.other.tabCharGlobal,"    "),ue.test(h)||de.test(h)||Ot.test(h)||V.test(h)||pe.test(h))break;if(P.search(this.rules.other.nonSpaceChar)>=b||!h.trim())u+=`
`+P.slice(b);else{if(k||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||ue.test(d)||de.test(d)||pe.test(d))break;u+=`
`+h}!k&&!h.trim()&&(k=!0),c+=Q+`
`,e=e.substring(Q.length+1),d=P.slice(b)}}s.loose||(r?s.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(r=!0));let v=null,ce;this.options.gfm&&(v=this.rules.other.listIsTask.exec(u),v&&(ce=v[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:c,task:!!v,checked:ce,loose:!1,text:u,tokens:[]}),s.raw+=c}const p=s.items.at(-1);if(p)p.raw=p.raw.trimEnd(),p.text=p.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const c=s.items[l].tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=u}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:s}}}table(e){var r;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=fe(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(r=t[3])!=null&&r.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const p of i)this.rules.other.tableAlignRight.test(p)?a.align.push("right"):this.rules.other.tableAlignCenter.test(p)?a.align.push("center"):this.rules.other.tableAlignLeft.test(p)?a.align.push("left"):a.align.push(null);for(let p=0;p<n.length;p++)a.header.push({text:n[p],tokens:this.lexer.inline(n[p]),header:!0,align:a.align[p]});for(const p of s)a.rows.push(fe(p,a.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:a.align[c]})));return a}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const a=I(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=Nn(t[2],"()");if(a===-2)return;if(a>-1){const p=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,p).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],s=a[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),be(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[i.toLowerCase()];if(!s){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return be(n,s,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...i[0]].length-1;let r,p,l=a,c=0;const u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+a);(i=u.exec(t))!=null;){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(p=[...r].length,i[3]||i[4]){l+=p;continue}else if((i[5]||i[6])&&a%3&&!((a+p)%3)){c+=p;continue}if(l-=p,l>0)continue;p=Math.min(p,p+l+c);const d=[...i[0]][0].length,h=e.slice(0,a+i.index+d+p);if(Math.min(a,p)%2){const b=h.slice(1,-1);return{type:"em",raw:h,text:b,tokens:this.lexer.inlineTokens(b)}}const k=h.slice(2,-2);return{type:"strong",raw:h,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=t[1],i="mailto:"+n):(n=t[1],i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let i,s;if(t[2]==="@")i=t[0],s="mailto:"+i;else{let a;do a=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(a!==t[0]);i=t[0],t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}}class x{constructor(e){f(this,"tokens");f(this,"options");f(this,"state");f(this,"tokenizer");f(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||C,this.options.tokenizer=this.options.tokenizer||new N,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:w,block:q.normal,inline:E.normal};this.options.pedantic?(t.block=q.pedantic,t.inline=E.pedantic):this.options.gfm&&(t.block=q.gfm,this.options.breaks?t.inline=E.breaks:t.inline=E.gfm),this.tokenizer.rules=t}static get rules(){return{block:q,inline:E}}static lex(e,t){return new x(t).lex(e)}static lexInline(e,t){return new x(t).inlineTokens(e)}lex(e){e=e.replace(w.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var i,s,a;for(this.options.pedantic&&(e=e.replace(w.tabCharGlobal,"    ").replace(w.spaceLine,""));e;){let r;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(l=>(r=l.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);const l=t.at(-1);r.raw.length===1&&l!==void 0?l.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+r.raw,l.text+=`
`+r.text,this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+r.raw,l.text+=`
`+r.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let p=e;if((a=this.options.extensions)!=null&&a.startBlock){let l=1/0;const c=e.slice(1);let u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},c),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(p=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(p))){const l=t.at(-1);n&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=`
`+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r),n=p.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="text"?(l.raw+=`
`+r.raw,l.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(r);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var r,p,l;let n=e,i=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,i.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,a="";for(;e;){s||(a=""),s=!1;let c;if((p=(r=this.options.extensions)==null?void 0:r.inline)!=null&&p.some(d=>(c=d.call({lexer:this},e,t))?(e=e.substring(c.raw.length),t.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const d=t.at(-1);c.type==="text"&&(d==null?void 0:d.type)==="text"?(d.raw+=c.raw,d.text+=c.text):t.push(c);continue}if(c=this.tokenizer.emStrong(e,n,a)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),t.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),t.push(c);continue}let u=e;if((l=this.options.extensions)!=null&&l.startInline){let d=1/0;const h=e.slice(1);let k;this.options.extensions.startInline.forEach(b=>{k=b.call({lexer:this},h),typeof k=="number"&&k>=0&&(d=Math.min(d,k))}),d<1/0&&d>=0&&(u=e.substring(0,d+1))}if(c=this.tokenizer.inlineText(u)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(a=c.raw.slice(-1)),s=!0;const d=t.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=c.raw,d.text+=c.text):t.push(c);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}}class H{constructor(e){f(this,"options");f(this,"parser");this.options=e||C}space(e){return""}code({text:e,lang:t,escaped:n}){var a;const i=(a=(t||"").match(w.notSpaceStart))==null?void 0:a[0],s=e.replace(w.endingNewline,"")+`
`;return i?'<pre><code class="language-'+S(i)+'">'+(n?s:S(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:S(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let i="";for(let r=0;r<e.items.length;r++){const p=e.items[r];i+=this.listitem(p)}const s=t?"ol":"ul",a=t&&n!==1?' start="'+n+'"':"";return"<"+s+a+`>
`+i+"</"+s+`>
`}listitem(e){var n;let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+S(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let s=0;s<e.header.length;s++)n+=this.tablecell(e.header[s]);t+=this.tablerow({text:n});let i="";for(let s=0;s<e.rows.length;s++){const a=e.rows[s];n="";for(let r=0;r<a.length;r++)n+=this.tablecell(a[r]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${S(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const i=this.parser.parseInline(n),s=me(e);if(s===null)return i;e=s;let a='<a href="'+e+'"';return t&&(a+=' title="'+S(t)+'"'),a+=">"+i+"</a>",a}image({href:e,title:t,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));const s=me(e);if(s===null)return S(n);e=s;let a=`<img src="${e}" alt="${n}"`;return t&&(a+=` title="${S(t)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:S(e.text)}}class re{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class _{constructor(e){f(this,"options");f(this,"renderer");f(this,"textRenderer");this.options=e||C,this.options.renderer=this.options.renderer||new H,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new re}static parse(e,t){return new _(t).parse(e)}static parseInline(e,t){return new _(t).parseInline(e)}parse(e,t=!0){var i,s;let n="";for(let a=0;a<e.length;a++){const r=e[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[r.type]){const l=r,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){n+=c||"";continue}}const p=r;switch(p.type){case"space":{n+=this.renderer.space(p);continue}case"hr":{n+=this.renderer.hr(p);continue}case"heading":{n+=this.renderer.heading(p);continue}case"code":{n+=this.renderer.code(p);continue}case"table":{n+=this.renderer.table(p);continue}case"blockquote":{n+=this.renderer.blockquote(p);continue}case"list":{n+=this.renderer.list(p);continue}case"html":{n+=this.renderer.html(p);continue}case"paragraph":{n+=this.renderer.paragraph(p);continue}case"text":{let l=p,c=this.renderer.text(l);for(;a+1<e.length&&e[a+1].type==="text";)l=e[++a],c+=`
`+this.renderer.text(l);t?n+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):n+=c;continue}default:{const l='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}parseInline(e,t=this.renderer){var i,s;let n="";for(let a=0;a<e.length;a++){const r=e[a];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[r.type]){const l=this.options.extensions.renderers[r.type].call({parser:this},r);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=l||"";continue}}const p=r;switch(p.type){case"escape":{n+=t.text(p);break}case"html":{n+=t.html(p);break}case"link":{n+=t.link(p);break}case"image":{n+=t.image(p);break}case"strong":{n+=t.strong(p);break}case"em":{n+=t.em(p);break}case"codespan":{n+=t.codespan(p);break}case"br":{n+=t.br(p);break}case"del":{n+=t.del(p);break}case"text":{n+=t.text(p);break}default:{const l='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}}class M{constructor(e){f(this,"options");f(this,"block");this.options=e||C}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?x.lex:x.lexInline}provideParser(){return this.block?_.parse:_.parseInline}}f(M,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Gn{constructor(...e){f(this,"defaults",Y());f(this,"options",this.setOptions);f(this,"parse",this.parseMarkdown(!0));f(this,"parseInline",this.parseMarkdown(!1));f(this,"Parser",_);f(this,"Renderer",H);f(this,"TextRenderer",re);f(this,"Lexer",x);f(this,"Tokenizer",N);f(this,"Hooks",M);this.use(...e)}walkTokens(e,t){var i,s;let n=[];for(const a of e)switch(n=n.concat(t.call(this,a)),a.type){case"table":{const r=a;for(const p of r.header)n=n.concat(this.walkTokens(p.tokens,t));for(const p of r.rows)for(const l of p)n=n.concat(this.walkTokens(l.tokens,t));break}case"list":{const r=a;n=n.concat(this.walkTokens(r.items,t));break}default:{const r=a;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[r.type]?this.defaults.extensions.childTokens[r.type].forEach(p=>{const l=r[p].flat(1/0);n=n.concat(this.walkTokens(l,t))}):r.tokens&&(n=n.concat(this.walkTokens(r.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const a=t.renderers[s.name];a?t.renderers[s.name]=function(...r){let p=s.renderer.apply(this,r);return p===!1&&(p=a.apply(this,r)),p}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=t[s.level];a?a.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),n.renderer){const s=this.defaults.renderer||new H(this.defaults);for(const a in n.renderer){if(!(a in s))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const r=a,p=n.renderer[r],l=s[r];s[r]=(...c)=>{let u=p.apply(s,c);return u===!1&&(u=l.apply(s,c)),u||""}}i.renderer=s}if(n.tokenizer){const s=this.defaults.tokenizer||new N(this.defaults);for(const a in n.tokenizer){if(!(a in s))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const r=a,p=n.tokenizer[r],l=s[r];s[r]=(...c)=>{let u=p.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}i.tokenizer=s}if(n.hooks){const s=this.defaults.hooks||new M;for(const a in n.hooks){if(!(a in s))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const r=a,p=n.hooks[r],l=s[r];M.passThroughHooks.has(a)?s[r]=c=>{if(this.defaults.async)return Promise.resolve(p.call(s,c)).then(d=>l.call(s,d));const u=p.call(s,c);return l.call(s,u)}:s[r]=(...c)=>{let u=p.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}i.hooks=s}if(n.walkTokens){const s=this.defaults.walkTokens,a=n.walkTokens;i.walkTokens=function(r){let p=[];return p.push(a.call(this,r)),s&&(p=p.concat(s.call(this,r))),p}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return x.lex(e,t??this.defaults)}parser(e,t){return _.parse(e,t??this.defaults)}parseMarkdown(e){return(n,i)=>{const s={...i},a={...this.defaults,...s},r=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&s.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=e);const p=a.hooks?a.hooks.provideLexer():e?x.lex:x.lexInline,l=a.hooks?a.hooks.provideParser():e?_.parse:_.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(c=>p(c,a)).then(c=>a.hooks?a.hooks.processAllTokens(c):c).then(c=>a.walkTokens?Promise.all(this.walkTokens(c,a.walkTokens)).then(()=>c):c).then(c=>l(c,a)).then(c=>a.hooks?a.hooks.postprocess(c):c).catch(r);try{a.hooks&&(n=a.hooks.preprocess(n));let c=p(n,a);a.hooks&&(c=a.hooks.processAllTokens(c)),a.walkTokens&&this.walkTokens(c,a.walkTokens);let u=l(c,a);return a.hooks&&(u=a.hooks.postprocess(u)),u}catch(c){return r(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+S(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}}}const $=new Gn;function m(o,e){return $.parse(o,e)}m.options=m.setOptions=function(o){return $.setOptions(o),m.defaults=$.defaults,Tt(m.defaults),m};m.getDefaults=Y;m.defaults=C;m.use=function(...o){return $.use(...o),m.defaults=$.defaults,Tt(m.defaults),m};m.walkTokens=function(o,e){return $.walkTokens(o,e)};m.parseInline=$.parseInline;m.Parser=_;m.parser=_.parse;m.Renderer=H;m.TextRenderer=re;m.Lexer=x;m.lexer=x.lex;m.Tokenizer=N;m.Hooks=M;m.parse=m;m.options;m.setOptions;m.use;m.walkTokens;m.parseInline;const Fn=m;_.parse;x.lex;const Mt=le(Object.assign({"../content/about.json":Ft})),Un=le(Object.assign({"../content/services/approach.json":Zt,"../content/services/tools.json":Vt})),Z=le(Object.assign({"../content/work/bh.json":Jt,"../content/work/kalamata.json":Kt,"../content/work/network.json":en,"../content/work/office_value.json":nn,"../content/work/rangekeeper.json":an,"../content/work/thesis.json":rn}));let G=[],T,y,R,B;function Zn(){G=Mt;const o=document.createElement("div");return o.className="content-container",T=document.createElement("div"),T.className="content-header",o.appendChild(T),y=document.createElement("div"),y.className="content-items",y.addEventListener("scroll",Bt),y.addEventListener("click",Wn),o.appendChild(y),Kn(),A(G),o}function Wn(o){const e=o.target.closest('a[href^="#"]');if(!e)return;o.preventDefault();const t=e.getAttribute("href").substring(1);A(Z,t)}function A(o,e){var t;G=o,T.textContent=((t=o[0])==null?void 0:t.title)??"",y.innerHTML="",o.forEach(n=>y.appendChild(Yn(n))),Bt(),e&&Vn(e)}function Vn(o){requestAnimationFrame(()=>{const e=y.querySelector(`.story[data-id="${o}"]`);if(!e)return;const t=e.querySelector(".story-title"),n=Array.from(e.querySelectorAll("img, video")),i=Qn(n);Jn(t,i)})}function Qn(o){return o.map(e=>new Promise(t=>{if(e instanceof HTMLImageElement&&e.complete||e instanceof HTMLVideoElement&&e.readyState>=1)t();else{const n=e instanceof HTMLImageElement?"load":"loadedmetadata";e.addEventListener(n,()=>t(),{once:!0})}}))}function Jn(o,e){Promise.all(e).then(()=>{y.scrollTop=0,requestAnimationFrame(()=>{y.offsetHeight,requestAnimationFrame(()=>{requestAnimationFrame(()=>{const t=T.getBoundingClientRect().top,n=y.getBoundingClientRect().top,s=o.getBoundingClientRect().top-n,a=t-n,r=s-a;y.scrollTo({top:r,behavior:"smooth"}),Xn(o)})})})})}function Xn(o){setTimeout(()=>{const e=o.getBoundingClientRect().top,t=T.getBoundingClientRect().top;if(Math.abs(e-t)>2){const n=e-t;y.scrollBy({top:n,behavior:"auto"})}},1e3)}function Bt(){var t,n;const o=y.scrollTop+T.offsetHeight;let e=((t=G[0])==null?void 0:t.title)??"";for(const i of y.querySelectorAll(".story")){if(i.offsetTop>o)break;const s=(n=i.querySelector(".story-title"))==null?void 0:n.textContent;s&&(e=s)}T.textContent=e}function Kn(){R=document.createElement("div"),R.className="media-modal-overlay",R.addEventListener("click",()=>R.classList.remove("open")),B=document.createElement("div"),B.className="media-modal-content",R.appendChild(B),document.getElementById("app").appendChild(R)}function jt(o){B.innerHTML="",B.appendChild(o),R.classList.add("open")}function le(o){return Object.values(o).map(e=>e.default).sort(({index:e=0},{index:t=0})=>e-t)}function Yn(o){const e=document.createElement("div");if(e.className="story",!o.title)throw new Error("Missing title in content record");e.dataset.id=o.title,e.id=o.title;const t=document.createElement("div");t.className="story-title",t.textContent=o.title,e.appendChild(t);const n=document.createElement("div");if(n.className="story-container",o.date){const i=document.createElement("p");i.className="date",i.textContent=ei(o.date),n.appendChild(i)}if(o.description){const i=document.createElement("p");i.className="description",i.textContent=o.description,n.appendChild(i)}return o.blocks.forEach(i=>{n.appendChild(ti(i))}),e.appendChild(n),e}function ei(o){return new Date(o).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}function ti(o){switch(o.type){case"body":return ni(o.value);case"image":return ii(o.value,{popout:o.popout});case"video":return si(o.value);case"caption":return ai(o.value);case"subtitle":return oi(o.value);default:throw new Error(`Unknown item type: ${o.type}`)}}function ni(o){const e=document.createElement("div");return e.className="body",e.innerHTML=Fn(o),e}function ii(o,e){const t=document.createElement("div");t.className="video-wrapper";const n=new Image;if(n.src=new URL(Object.assign({"../content/media/bh01.png":nt,"../content/media/daylight_views01.png":it,"../content/media/daylight_views04.png":st,"../content/media/daylight_views10.png":at,"../content/media/daylight_views11.png":ot,"../content/media/daylight_views12.png":rt,"../content/media/df_profile-sq.png":lt,"../content/media/kalamata01.mp4":ct,"../content/media/kalamata02.png":pt,"../content/media/kalamata03.png":ut,"../content/media/kalamata04.png":dt,"../content/media/network01.png":ht,"../content/media/network02.png":gt,"../content/media/nycd111-sm.mp4":mt,"../content/media/nycd316.mp4":ft,"../content/media/rk01.png":bt,"../content/media/rk02.png":kt,"../content/media/rk03.png":yt,"../content/media/rk04.png":wt,"../content/media/thesis01.jpg":vt,"../content/media/thesis01.png":xt,"../content/media/thesis02.png":_t,"../content/media/thesis03.png":St})[`../content/media/${o}`],import.meta.url).href,n.style.display="block",t.appendChild(n),(e==null?void 0:e.popout)!==!1){const s=qt(()=>{const a=n.cloneNode(!0);jt(a)});t.appendChild(s)}return t}function si(o){const e=document.createElement("div");e.className="video-wrapper";const t=document.createElement("video");t.src=new URL(Object.assign({"../content/media/bh01.png":nt,"../content/media/daylight_views01.png":it,"../content/media/daylight_views04.png":st,"../content/media/daylight_views10.png":at,"../content/media/daylight_views11.png":ot,"../content/media/daylight_views12.png":rt,"../content/media/df_profile-sq.png":lt,"../content/media/kalamata01.mp4":ct,"../content/media/kalamata02.png":pt,"../content/media/kalamata03.png":ut,"../content/media/kalamata04.png":dt,"../content/media/network01.png":ht,"../content/media/network02.png":gt,"../content/media/nycd111-sm.mp4":mt,"../content/media/nycd316.mp4":ft,"../content/media/rk01.png":bt,"../content/media/rk02.png":kt,"../content/media/rk03.png":yt,"../content/media/rk04.png":wt,"../content/media/thesis01.jpg":vt,"../content/media/thesis01.png":xt,"../content/media/thesis02.png":_t,"../content/media/thesis03.png":St})[`../content/media/${o}`],import.meta.url).href,t.controls=!1,t.loop=!0,t.muted=!0,t.autoplay=!0,t.className="animation",e.appendChild(t),e.addEventListener("mouseenter",()=>{t.controls=!0}),e.addEventListener("mouseleave",()=>{t.controls=!1});const n=qt(()=>{const i=t.cloneNode(!0);i.controls=!0,jt(i)});return e.appendChild(n),e}function ai(o){const e=document.createElement("p");return e.textContent=o,e.className="caption",e}function oi(o){const e=document.createElement("h4");return e.textContent=o,e.className="subtitle",e}function qt(o){const e=document.createElement("button");return e.className="popout-button",e.innerHTML='<i class="fa-solid fa-up-right-from-square"></i>',e.addEventListener("click",o),e}const ri=["About","Services","Selected Work"];let L,z,K;function li(){return L=document.createElement("div"),L.className="menu-container",K=ci(),L.appendChild(K),z=di(),L.appendChild(z),L}function ci(){const o=document.createElement("div");o.className="menu-header";const e=document.createElement("div");e.className="menu-header-text",e.textContent="Daniel Fink",o.appendChild(e);const t=pi();return o.appendChild(t),o}function pi(){const o=document.createElement("div");return o.className="hamburger",o.textContent="☰",o.addEventListener("click",ui),o}function ui(){z.classList.toggle("open"),requestAnimationFrame(()=>{const o=K.offsetHeight,e=z.offsetHeight,t=o+e;document.documentElement.style.setProperty("--menu-total-height",`${t}px`)})}function di(){const o=document.createElement("div");return o.className="menu-items",ri.forEach(e=>{const t=hi(e);o.appendChild(t)}),o}function hi(o){const e=document.createElement("div");if(e.className="menu-item",e.textContent=o,e.addEventListener("click",()=>gi(o)),o==="Selected Work"){const t=mi();e.appendChild(t)}return e}function gi(o){switch(o){case"About":A(Mt);break;case"Services":A(Un);break;case"Selected Work":A(Z);break}}function mi(){const o=document.createElement("div");return o.className="sub-menu",Z.forEach(e=>{const t=fi(e);o.appendChild(t)}),o}function fi(o){const e=document.createElement("div");return e.className="sub-menu-item",e.textContent=o.title||"",e.dataset.target=o.title||"",e.addEventListener("click",t=>{t.stopPropagation(),bi(e.dataset.target)}),e}function bi(o){A(Z,o),z.classList.contains("open")&&z.classList.remove("open")}const J=document.getElementById("app"),W=document.createElement("div");W.className="columns";const ki=li();W.append(ki);const yi=Zn();W.append(yi);J==null||J.appendChild(W);
